<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>EV Cost Tracker</title>

    <!-- PWA Setup -->
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#0f172a" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="apple-touch-icon" href="icon-192.png" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- CSS personalizzato -->
    <link rel="stylesheet" href="css/styles.css" />


    <!-- React + ReactDOM (UMD) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel per JSX in-browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

    <!-- Stile personalizzato opzionale -->
    <style>
        body {
            background-color: #020617;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(16, 185, 129, 0.3);
            border-top-color: #10b981;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="min-h-screen theme-default">

    <!-- ROOT REACT -->
    <div id="root"></div>

    <!-- =============================== -->
    <!--      COMPONENTI UI              -->
    <!-- =============================== -->
    <script type="text/babel" src="js/ui.js"></script>
    <script type="text/babel" src="js/charts.js"></script>
    <script type="text/babel" src="js/analysis.js"></script>
    <script type="text/babel" src="js/forms.js"></script>

    <!-- =============================== -->
    <!--      SERVICES                   -->
    <!-- =============================== -->
    <script type="text/babel" src="js/supabase.js"></script>

    <!-- =============================== -->
    <!--      UTILS                      -->
    <!-- =============================== -->
    <script type="text/babel" src="js/utils.js"></script>
    <script type="text/babel" src="js/stats.js"></script>

    <!-- =============================== -->
    <!--      APP PRINCIPALE             -->
    <!-- =============================== -->
    <script type="text/babel" src="js/app.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker
                    .register("sw.js")
                    .then(() => console.log("PWA Service Worker registrato!"))
                    .catch((err) => console.log("Errore PWA:", err));
            });
        }
    </script>
</body>

</html>
